{% extends 'base.html.twig' %}

{% block title %}Réservation N° {{booking.id}}{% endblock %}

{% block body %}

    <main class="container">
        <h1 class="h4">Réservation N° {{booking.id}}</h1>
        <h2 class="h6"><em><a href="{{path('ads_single',{'slug':booking.ad.slug})}}">{{booking.ad.title}}</a></em></h2>

        {% if app.request.query.get('alert') %}
        <div class="alert alert-success">
        <h4 class="alert-heading">Félicitation !</h4>
        <p>Votre réservation auprès de <a href="{{path('user_show',{'slug':booking.ad.author.slug})}}">{{booking.ad.author.fullName}}</a> pour l'annonce
        <a href="{{path('ads_single',{'slug':booking.ad.slug})}}">{{booking.ad.title}}</a> a bien été prise en compte.</p>
        </div>
        {% endif %}
        <div class="row">
            <div class="col">
                <div class="alert alert-secondary">
                <h3 class="h5 mt-3">Récapitulatif :</h3>
                <dl class="row mt-3">
                    <dt class="col-md-4">Numéro :</dt>
                    <dd class="col-md-8">{{ booking.id }}</dd>
                    <dt class="col-md-4">Date d'arrivée :</dt>
                    <dd class="col-md-8">{{ booking.startDate | date('d/m/Y') }}</dd>
                    <dt class="col-md-4">Date de départ :</dt>
                    <dd class="col-md-8">{{ booking.endDate | date('d/m/Y') }}</dd>
                    <dt class="col-md-4">Nombre de jours :</dt>
                    <dd class="col-md-8">{{ booking.duration }}</dd>
                    <dt class="col-md-4">Prix par jour :</dt>
                    <dd class="col-md-8">{{ booking.ad.price }} &euro;</dd>
                    <dt class="col-md-4">Montant total :</dt>
                    <dd class="col-md-8">{{ booking.amount }} &euro;</dd>
                    <dt class="col-md-4">Commentaire :</dt>
                    <dd class="col-md-8">{{ booking.comment }}</dd>
                </dl>
                <hr>
                <h3 class="h5 alert-heading">Propriétaire du bien :</h3>
                <div class="row">
                        <div class="col-md-3">
                            <img src="{{booking.ad.author.avatar}}" alt="avatar de {{booking.ad.author.fullName}}" class="img-thumbnail">
                        </div>
                        <div class="col-md-9">
                            <h4 class="h6">
                            <a href="{{path('user_show',{'slug':booking.ad.author.slug})}}">{{booking.ad.author.fullName}}</a>
                            </h4>
                            <span class="badge badge-info">{{booking.ad.author.ads|length}}{% if booking.ad.author.ads|length > 1 %} annonces{% else %} annonce{% endif %}</span>
                        </div>
                    <div class="px-3 mt-3">
                    {{booking.ad.author.description|raw}}
                    </div>
                </div>
                </div>
            </div>
            <div class="col">
                <div class="alert alert-secondary">
                <h3 class="h5 alert-heading mt-3">Votre Hébergement :</h3>    
                    <h4 class="h5 mt-3"><a href="{{path('ads_single',{'slug':booking.ad.slug})}}">{{booking.ad.title|upper}}</a></h4>
                    <img src="{{booking.ad.coverImage}}" alt="Image de couverture de {{booking.ad.title}}" class="img-fluid mb-3">
                    {{booking.ad.content|raw}}
                    <a href="{{path('ads_single',{'slug':booking.ad.slug})}}" class="btn btn-outline-info btn-sm ml-3">détails</a>
                </div>
            </div>
        </div>
    </main>

{% endblock %}